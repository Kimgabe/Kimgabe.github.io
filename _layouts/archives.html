---
layout: default
---

<div class="wrap">
  <!-- Archives Dashboard Header -->
  <header class="dashboard-header">
    <h1>{{ page.title | default: "아카이브" }}</h1>
    <p>{{ page.description | default: "시간순으로 정리된 모든 게시글을 둘러보세요" }}</p>
  </header>

  <!-- Metrics Bar -->
  <div class="metrics-bar">
    <div class="metric-item">
      <div class="metric-icon">
        <i class="fas fa-file-alt"></i>
      </div>
      <div class="metric-info">
        <div class="metric-number">{{ site.posts.size }}</div>
        <div class="metric-label">총 게시글</div>
      </div>
    </div>
    
    <div class="metric-item">
      <div class="metric-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="metric-info">
        {% assign years = site.posts | group_by_exp: "post", "post.date | date: '%Y'" %}
        <div class="metric-number">{{ years.size }}</div>
        <div class="metric-label">활동 연도</div>
      </div>
    </div>
    
    <div class="metric-item">
      <div class="metric-icon">
        <i class="fas fa-edit"></i>
      </div>
      <div class="metric-info">
        {% if site.posts.size > 0 %}
          {% assign latest_post = site.posts | first %}
          {% assign days_ago = 'now' | date: '%s' | minus: latest_post.date | date: '%s' | divided_by: 86400 %}
          <div class="metric-number">{{ days_ago }}</div>
          <div class="metric-label">일 전 업데이트</div>
        {% else %}
          <div class="metric-number">0</div>
          <div class="metric-label">게시글 없음</div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Archive Navigation -->
  <nav class="archive-nav">
    <div class="nav-buttons">
      <button class="nav-btn active" data-view="timeline">
        <i class="fas fa-stream"></i> 타임라인
      </button>
      <button class="nav-btn" data-view="calendar">
        <i class="fas fa-calendar"></i> 달력
      </button>
      <button class="nav-btn" data-view="stats">
        <i class="fas fa-chart-bar"></i> 통계
      </button>
    </div>
    
    <div class="archive-search">
      <input type="text" id="archive-search" placeholder="게시글 검색..." class="search-input">
      <button class="search-btn">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </nav>

  <!-- Timeline View (Default) -->
  <section class="archive-view timeline-view active" id="timeline-view">
    <div class="timeline-container">
      {% assign posts_by_year = site.posts | group_by_exp: "post", "post.date | date: '%Y'" %}
      
      {% for year_group in posts_by_year %}
        {% assign year = year_group.name %}
        {% assign year_posts = year_group.items %}
        
        <div class="timeline-year">
          <h2 class="year-title">
            <span class="year-number">{{ year }}</span>
            <span class="year-count">({{ year_posts.size }}개 게시글)</span>
          </h2>
          
          <div class="timeline-months">
            {% assign posts_by_month = year_posts | group_by_exp: "post", "post.date | date: '%m'" %}
            
            {% for month_group in posts_by_month %}
              {% assign month = month_group.name %}
              {% assign month_posts = month_group.items %}
              {% assign month_name = month | date: '%B' %}
              
              <div class="timeline-month">
                <h3 class="month-title">
                  <i class="fas fa-folder"></i>
                  {{ month | date: '%m' }}월
                  <span class="month-count">({{ month_posts.size }}개)</span>
                </h3>
                
                <div class="timeline-posts">
                  {% for post in month_posts %}
                  <article class="timeline-post" data-title="{{ post.title | downcase }}" data-categories="{{ post.categories | join: ' ' | downcase }}">
                    <div class="post-timeline-marker">
                      <div class="timeline-dot"></div>
                      <div class="timeline-line"></div>
                    </div>
                    
                    <div class="post-timeline-content">
                      <time class="post-date">{{ post.date | date: "%Y년 %m월 %d일" }}</time>
                      <h4 class="post-title">
                        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                      </h4>
                      
                      {% if post.excerpt %}
                      <p class="post-excerpt">{{ post.excerpt | strip_html | truncate: 120 }}</p>
                      {% endif %}
                      
                      <div class="post-meta">
                        {% if post.categories.size > 0 %}
                        <div class="post-categories">
                          {% for category in post.categories limit: 2 %}
                          <span class="post-category">{{ category }}</span>
                          {% endfor %}
                        </div>
                        {% endif %}
                        
                        {% if post.tags.size > 0 %}
                        <div class="post-tags">
                          {% for tag in post.tags limit: 3 %}
                          <span class="post-tag">{{ tag }}</span>
                          {% endfor %}
                        </div>
                        {% endif %}
                      </div>
                    </div>
                  </article>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- Calendar View -->
  <section class="archive-view calendar-view" id="calendar-view">
    <div class="calendar-container">
      <div class="calendar-header">
        <h2>게시글 캘린더</h2>
        <p>날짜별 게시글 현황을 확인하세요</p>
      </div>
      
      <div class="calendar-grid">
        {% assign posts_by_year = site.posts | group_by_exp: "post", "post.date | date: '%Y'" %}
        
        {% for year_group in posts_by_year %}
          {% assign year = year_group.name %}
          {% assign year_posts = year_group.items %}
          
          <div class="calendar-year">
            <h3 class="calendar-year-title">{{ year }}</h3>
            
            <div class="calendar-months-grid">
              {% for month in (1..12) %}
                {% assign month_str = month | prepend: '0' | slice: -2, 2 %}
                {% assign month_posts = '' | split: '' %}
                {% for post in year_posts %}
                  {% assign post_month = post.date | date: '%m' %}
                  {% if post_month == month_str %}
                    {% assign month_posts = month_posts | push: post %}
                  {% endif %}
                {% endfor %}
                
                <div class="calendar-month {% if month_posts.size > 0 %}has-posts{% endif %}" 
                     data-year="{{ year }}" 
                     data-month="{{ month }}"
                     data-count="{{ month_posts.size }}">
                  <div class="month-name">{{ month_str }}월</div>
                  <div class="month-posts-count">{{ month_posts.size }}</div>
                  {% if month_posts.size > 0 %}
                  <div class="month-posts-preview">
                    {% for post in month_posts limit: 3 %}
                    <div class="preview-post">
                      <a href="{{ post.url | relative_url }}">{{ post.title | truncate: 30 }}</a>
                    </div>
                    {% endfor %}
                    {% if month_posts.size > 3 %}
                    <div class="more-posts">+{{ month_posts.size | minus: 3 }}개 더</div>
                    {% endif %}
                  </div>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Stats View -->
  <section class="archive-view stats-view" id="stats-view">
    <div class="stats-container">
      <div class="stats-header">
        <h2>블로그 통계</h2>
        <p>게시글 작성 패턴과 활동 현황을 분석해보세요</p>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <h3>연도별 게시글</h3>
          <canvas id="yearly-chart"></canvas>
        </div>
        
        <div class="stat-card">
          <h3>월별 활동</h3>
          <canvas id="monthly-chart"></canvas>
        </div>
        
        <div class="stat-card">
          <h3>카테고리 분포</h3>
          <canvas id="category-chart"></canvas>
        </div>
        
        <div class="stat-card">
          <h3>최근 활동</h3>
          <div class="recent-activity">
            {% for post in site.posts limit: 5 %}
            <div class="activity-item">
              <time>{{ post.date | date: "%m/%d" }}</time>
              <a href="{{ post.url | relative_url }}">{{ post.title | truncate: 40 }}</a>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Archive navigation
  const navButtons = document.querySelectorAll('.nav-btn');
  const archiveViews = document.querySelectorAll('.archive-view');
  
  navButtons.forEach(button => {
    button.addEventListener('click', function() {
      const targetView = this.dataset.view;
      
      // Update active states
      navButtons.forEach(btn => btn.classList.remove('active'));
      archiveViews.forEach(view => view.classList.remove('active'));
      
      this.classList.add('active');
      document.getElementById(targetView + '-view').classList.add('active');
      
      // Initialize charts if stats view
      if (targetView === 'stats') {
        initializeCharts();
      }
    });
  });
  
  // Search functionality
  const searchInput = document.getElementById('archive-search');
  searchInput.addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    const timelinePosts = document.querySelectorAll('.timeline-post');
    
    timelinePosts.forEach(post => {
      const title = post.dataset.title;
      const categories = post.dataset.categories;
      const isMatch = title.includes(searchTerm) || categories.includes(searchTerm);
      
      post.style.display = isMatch ? 'flex' : 'none';
    });
    
    // Hide empty months
    const months = document.querySelectorAll('.timeline-month');
    months.forEach(month => {
      const visiblePosts = month.querySelectorAll('.timeline-post[style="display: flex"], .timeline-post:not([style])');
      month.style.display = visiblePosts.length > 0 ? 'block' : 'none';
    });
  });
  
  // Calendar month hover
  const calendarMonths = document.querySelectorAll('.calendar-month.has-posts');
  calendarMonths.forEach(month => {
    month.addEventListener('mouseenter', function() {
      const preview = this.querySelector('.month-posts-preview');
      if (preview) {
        preview.style.display = 'block';
      }
    });
    
    month.addEventListener('mouseleave', function() {
      const preview = this.querySelector('.month-posts-preview');
      if (preview) {
        preview.style.display = 'none';
      }
    });
  });
});

// Chart initialization (placeholder)
function initializeCharts() {
  // This would contain Chart.js initialization code
  // For now, we'll just log that charts would be initialized
  console.log('Charts would be initialized here with Jekyll data');
}
</script>