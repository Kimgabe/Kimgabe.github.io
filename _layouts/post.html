---
layout: default
---

<!-- Reading Progress Bar -->
<div class="reading-progress">
  <div class="reading-progress-fill"></div>
</div>

<div class="wrap">
  <!-- Post Header -->
  <header class="post-header">
    <div class="post-header-content">
      <h1 class="post-title">{{ page.title }}</h1>
      <div class="post-meta">
        <div class="meta-item">
          <i class="far fa-calendar-alt"></i>
          <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%Y년 %m월 %d일" }}</time>
        </div>
        {% if page.read_time != false %}
        <div class="meta-item">
          <i class="far fa-clock"></i>
          <span>{{ content | number_of_words | divided_by: 200 | plus: 1 }}분 읽기</span>
        </div>
        {% endif %}
        {% if site.page_views %}
        <div class="meta-item">
          <i class="far fa-eye"></i>
          <span class="page-views" data-url="{{ page.url | absolute_url }}">0회 조회</span>
        </div>
        {% endif %}
        {% if site.comments.provider and page.comments != false %}
        <div class="meta-item">
          <i class="far fa-comments"></i>
          <span class="disqus-comment-count" data-disqus-url="{{ page.url | absolute_url }}">0개 댓글</span>
        </div>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- Post Layout: Main Content + Right TOC -->
  <div class="post-layout">
    <!-- Post Content (Center) -->
    <article class="post-content">
      {{ content }}
    </article>

    <!-- Table of Contents (Right Sidebar) -->
    {% if page.toc != false %}
    <aside class="post-toc">
      <div class="toc-wrapper">
        <h4 class="toc-title"><i class="fas fa-list"></i> 목차</h4>
        <div id="toc-content">
          <!-- TOC will be generated by JavaScript -->
        </div>
      </div>
    </aside>
    {% endif %}
  </div>

  <!-- Tags -->
  {% if page.tags and page.tags.size > 0 %}
  <div class="post-tags">
    <h3 class="tags-title">
      <i class="fas fa-tags"></i> 태그
    </h3>
    <div class="tags-list">
      {% for tag in page.tags %}
        <a href="{{ '/tags/#' | append: tag | slugify | relative_url }}" class="tag-item">{{ tag }}</a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Categories -->
  {% if page.categories and page.categories.size > 0 %}
  <div class="post-categories">
    <h3 class="categories-title">
      <i class="fas fa-folder"></i> 카테고리
    </h3>
    <div class="categories-list">
      {% for category in page.categories %}
      <a href="{{ '/categories/#' | append: category | slugify | relative_url }}" class="category-item">{{ category }}</a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Post Navigation -->
  <nav class="post-navigation">
    <div class="nav-links">
      {% if page.previous %}
      <a href="{{ page.previous.url | relative_url }}" class="nav-link prev-post">
        <div class="nav-link-label">
          <i class="fas fa-chevron-left"></i> 이전 글
        </div>
        <div class="nav-link-title">{{ page.previous.title | truncate: 50 }}</div>
      </a>
      {% endif %}
      
      {% if page.next %}
      <a href="{{ page.next.url | relative_url }}" class="nav-link next-post">
        <div class="nav-link-label">
          다음 글 <i class="fas fa-chevron-right"></i>
        </div>
        <div class="nav-link-title">{{ page.next.title | truncate: 50 }}</div>
      </a>
      {% endif %}
    </div>
  </nav>

  <!-- Comments Section -->
  {% if site.comments.provider and page.comments != false %}
  <section class="comments-section">
    <h3 class="comments-title">
      <i class="far fa-comments"></i> 댓글
    </h3>
    {% case site.comments.provider %}
      {% when "disqus" %}
        {% include comments/disqus.html %}
      {% when "utterances" %}
        {% include comments/utterances.html %}
      {% when "giscus" %}
        {% include comments/giscus.html %}
      {% else %}
        <div class="comments-placeholder">
          💬 댓글 시스템이 여기에 표시됩니다.<br>
          실제 구현에서는 Disqus, Utterances 등을 사용할 수 있습니다.
        </div>
    {% endcase %}
  </section>
  {% endif %}

  <!-- Related Posts -->
  {% assign related_posts = site.related_posts | default: site.posts %}
  {% if related_posts.size > 0 %}
  <section class="related-posts">
    <h3 class="related-title">
      <i class="fas fa-newspaper"></i> 관련 글
    </h3>
    <div class="related-grid">
      {% for post in related_posts limit: 3 %}
      <article class="related-post">
        <div class="related-cover">
          <a href="{{ post.url | relative_url }}">
            {% if post.header.teaser %}
              <img src="{{ post.header.teaser | relative_url }}" alt="{{ post.title }}" loading="lazy">
            {% else %}
              <div class="placeholder-cover">
                <i class="fas fa-file-alt"></i>
              </div>
            {% endif %}
          </a>
        </div>
        <div class="related-info">
          <time class="related-date">{{ post.date | date: "%m/%d" }}</time>
          <h4 class="related-title">
            <a href="{{ post.url | relative_url }}">{{ post.title | truncate: 40 }}</a>
          </h4>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}
</div>

<script>
// Reading progress bar
function updateReadingProgress() {
  const article = document.querySelector('.post-content');
  const progressFill = document.querySelector('.reading-progress-fill');
  
  if (article && progressFill) {
    const articleTop = article.offsetTop;
    const articleHeight = article.offsetHeight;
    const windowHeight = window.innerHeight;
    const scrollTop = window.pageYOffset;
    
    const articleBottom = articleTop + articleHeight - windowHeight;
    const progress = Math.min(100, Math.max(0, (scrollTop - articleTop) / (articleBottom - articleTop) * 100));
    
    progressFill.style.width = progress + '%';
  }
}

// Smooth scrolling for anchor links
function initSmoothScrolling() {
  const anchorLinks = document.querySelectorAll('a[href^="#"]');
  anchorLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href').substring(1);
      const targetElement = document.getElementById(targetId);
      
      if (targetElement) {
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Generate Table of Contents in right sidebar
function generateTOC() {
  const tocContent = document.getElementById('toc-content');
  const headings = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
  
  if (tocContent && headings.length > 0) {
    const tocList = document.createElement('ul');
    tocList.className = 'toc-list';
    
    headings.forEach((heading, index) => {
      // Add ID to heading if it doesn't have one
      if (!heading.id) {
        heading.id = 'heading-' + index;
      }
      
      const listItem = document.createElement('li');
      const link = document.createElement('a');
      link.href = '#' + heading.id;
      link.textContent = heading.textContent;
      link.className = 'toc-level-' + heading.tagName.toLowerCase();
      
      listItem.appendChild(link);
      tocList.appendChild(listItem);
    });
    
    tocContent.appendChild(tocList);
  }
}

// Highlight current section in TOC
function highlightCurrentSection() {
  const headings = document.querySelectorAll('.post-content h2, .post-content h3, .post-content h4');
  const tocLinks = document.querySelectorAll('.post-toc a');
  
  let currentHeading = null;
  
  headings.forEach(heading => {
    const rect = heading.getBoundingClientRect();
    if (rect.top <= 100) {
      currentHeading = heading.id;
    }
  });
  
  tocLinks.forEach(link => {
    link.classList.remove('active');
    if (currentHeading && link.getAttribute('href') === '#' + currentHeading) {
      link.classList.add('active');
    }
  });
}

// Initialize post features
document.addEventListener('DOMContentLoaded', function() {
  generateTOC();
  updateReadingProgress();
  initSmoothScrolling();
  highlightCurrentSection();
});

// Event listeners
window.addEventListener('scroll', function() {
  updateReadingProgress();
  highlightCurrentSection();
});
</script>